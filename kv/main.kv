#:import dt datetime
#:import Factory kivy.factory.Factory

#:set rojo (1., .0, .0)
#:set naranja (1, .82, .0)
#:set azul (.0, 1., 0.62)


<MyPopup@Popup>:
    size_hint:0.7,0.7
    pos_hint:{"center_y": .5, "center_x": .5}
    FloatLayout:
        Label:
            text:'Se restauraran los datos de fabrica y se reiniciara'
            halign:'center'
            pos_hint:{"center_y": .8,"center_x":0.5}
        Label:
            text:'¿Estas seguro?'
            halign:'center'
            pos_hint:{"center_y": .7,"center_x":0.5}
        Button:
            text: 'Si'
            pos_hint:{"y": 0,"center_x":.25}
            size_hint:0.25,0.25
            on_release: app.reset_fabrica()
        Button:
            text: 'No'
            pos_hint:{"y": 0,"center_x":.75}
            size_hint:0.25,0.25
            on_release: root.dismiss()


<MySpinnerOption@SpinnerOption>:
    font_size:15
    size_hint: 1, None
    height:dp(35)

<DiasScheduler@SpinnerOption>:
    font_size:15
    size_hint: 1, None
    height:dp(35)
    on_release:app.cambiar_dia()

<CopiarDia@SpinnerOption>:
    font_size:15
    size_hint: 1, None
    height:dp(35)

<BackgroundColor@Widget>:
    background_color: 1, 1, 1
    canvas.before:
        Color:
            rgb: root.background_color
        Rectangle:
            size: self.size
            pos: self.pos

<BackgroundLabel@Label+ButtonBehavior+BackgroundColor>:
    background_color: rojo
<LabelButton@Label+ButtonBehavior+BackgroundColor>:
    background_color: rojo
    font_size:17
    markup:True

<Securities@SpinnerOption>:
    font_size:15
    size_hint: 1, None
    height:dp(35)
    on_release:app.set_secvalue()

<SecModes@SpinnerOption>:
    font_size:15
    size_hint: 1, None
    height:dp(35)
    on_release:app.rm_label()

<Etiqueta@Label>:
    halign:"right"
    font_size:15
    size_hint: .15, .1
    #font_name:'Arial'

<BotonImagen@ButtonBehavior+Image>:
    size_hint:1.,1.

<BotonArriba@ButtonBehavior+Image>:
    size_hint: .5, .1
    top:.5

<BotonAbajo@ButtonBehavior+Image>:
    size_hint: .1575, .28
    top:.3

<EtiqPrincipal@Label>:
    halign:'auto'
    font_size:17
    markup:True

<EtiqModo@ButtonBehavior+Label>:
    halign:'auto'
    font_size:17
    markup:True


<Fondo@Screen>:
    canvas.before:
        BorderImage:
            # BorderImage behaves like the CSS BorderImage

            source: 'data/fondo.jpg'
            pos: self.pos
            size: self.size



<Main@ScreenManager>:
    id:sm
    Fondo:
        name:'menu0'

        FloatLayout:

            Label:
                size_hint:.1,.1
                pos_hint:{"top": 1., "center_x": .6}
                font_size:20
                markup:True
                text:'[b][color=ED5499] REGULACIÓN MULTIBETON [/color][/b]'
            BotonAbajo:
                size_hint: .11, .17
				pos_hint:{"center_x": .84, "y": .06}
				source:"data/home.png"
				on_press:sm.current ='menu0'
            Label:
                markup:True
                size_hint: .11, .17
				pos_hint:{"center_x": .84, "top": .12}
				text:'[b]Inicio[/b]'
		    BotonAbajo:
                size_hint: .11, .17
				pos_hint:{"center_x": .64, "y": .06}
				source:"data/ajustes.png"
				on_press:sm.current ='ajustes'

		    Label:
		        markup:True
                size_hint: .11, .17
				pos_hint:{"center_x": .64, "top": .12}
				text:'[b]Ajustes[/b]'

			BotonAbajo:
                size_hint: .11, .17
				pos_hint:{"center_x": .44, "y": .06}
				source:"data/Sondas.png"
				on_press:sm.current ='sensores'

            Label:
                markup:True
                size_hint: .11, .17
				pos_hint:{"center_x": .44, "top": .12}
				text:'[b]Sondas[/b]'




            EtiqModo:
                id:modo0
                text:app.etiqprinc
                size_hint:.1,.1
                pos_hint:{"center_y": .95, "center_x": .17}
                on_press:sm.current = "modos_func"


            EtiqPrincipal:
                id:t_ext0
                text:'[b]T EXTERIOR:' +'    '+'[color=006CFF]'+str(app.t_ext)+' [/color][/b]'
                size_hint:.1,.1
                pos_hint:{"center_y": .85, "center_x": .13}

            EtiqPrincipal:
                text:'[b]MODO DE LA ZONA[/b]'
                size_hint:.1,.1
                pos_hint:{"center_y": .76, "center_x": .137}

            EtiqPrincipal:
                text:'[b]TEMPERATURA AMBIENTE[/b]'
                size_hint:.1,.1
                pos_hint:{"center_y": .665, "center_x": .180}

            EtiqPrincipal:
                text:'[b]TEMPERATURA DESEADA[/b]'
                size_hint:.1,.1
                pos_hint:{"center_y": .57, "center_x": .175}

            EtiqPrincipal:
                text:'[b]TEMPERATURA AGUA[/b]'
                size_hint:.1,.1
                pos_hint:{"center_y": .48, "center_x": .152}

            EtiqPrincipal:
                text:'[b]ESTADO REGULACIÓN[b]'
                size_hint:.1,.1
                pos_hint:{"center_y": .385, "center_x": .158}

            EtiqPrincipal:
                text:'[b]BOMBA CIRCULADORA[/b]'
                size_hint:.1,.1
                pos_hint:{"center_y": .29, "center_x": .16}

            BoxLayout:
                size_hint:.6,.65
                orientation:'horizontal'
                pos_hint:{"top": .9, "x": .35}
                BoxLayout:
                    orientation:'vertical'
                    padding:[5,0,20,0]
                    LabelButton:
                        text:'[b]ZONA 1[/b]'
                        on_press:app.camzona(0)
                        on_release:sm.current='menu1'


                    EtiqPrincipal:
                        id: modo_z1
                        text:'[b]CONFORT[/b]'

                    EtiqPrincipal:
                        id:t_amb_z1_p0
                        text:'[b]' + str(app.t_amb[0]) + 'ºC[/b]'

                    EtiqPrincipal:
                        id: t_des_z1_p0
                        text:'[b]' + str(app.consignas[0]) + 'ºC[/b]'

                    EtiqPrincipal:
                        id: t_agua_z1_p0
                        text:'[b]' + str(app.t_agua[0]) + 'ºC[/b]'

                    EtiqPrincipal:
                        id:est_reg_z1_p0
                        text:'[b] Calculando [/b]'

                    EtiqPrincipal:
                        id:mod_bomb_z1
                        text:'[b] AUTO ON [/b]'

                BoxLayout:
                    orientation:'vertical'
                    padding:[5,0,20,0]
                    LabelButton:
                        text:'[b]ZONA 2[/b]'
                        on_press:app.camzona(1)
                        on_press:sm.current='menu2'

                    EtiqPrincipal:
                        id:modo_z2
                        text:'[b]CONFORT[/b]'

                    EtiqPrincipal:
                        id:t_amb_z2_p0
                        text:'[b]' + str(app.t_amb[0]) + 'ºC[/b]'

                    EtiqPrincipal:
                        id: t_des_z2_p0
                        text:'[b]' + str(app.consignas[0]) + 'ºC[/b]'

                    EtiqPrincipal:
                        id:t_agua_z2_p0
                        text:'[b]' + str(app.t_agua[0]) + 'ºC[/b]'

                    EtiqPrincipal:
                        id:est_reg_z2_p0
                        text:'[b] Calculando [/b]'

                    EtiqPrincipal:
                        id:mod_bomb_z2
                        text:'[b] AUTO ON [/b]'



                BoxLayout:
                    orientation:'vertical'
                    padding:[5,0,20,0]
                    LabelButton:
                        text:'[b]ZONA 3[/b]'
                        on_release:sm.current='menu3'

                    EtiqPrincipal:
                        text:'-'

                    EtiqPrincipal:
                        id:t_amb_z3_p0
                        text:'[b]' + str(app.t_amb[0]) + 'ºC[/b]'

                    EtiqPrincipal:
                        id:t_des_z3_p0
                        text:'[b]' + str(app.consignas[0]) + 'ºC[/b]'

                    EtiqPrincipal:
                        text:'-'

                    EtiqPrincipal:
                        text:'-'

                    EtiqPrincipal:
                        text:'[b] AUTO ON [/b]'


            Label:
                size_hint:.1,.1
                pos_hint:{"top": .22, "center_x": .063}
                font_size:20
                markup:True
                text:'Hora'

            Label:
                size_hint:.1,.1
                pos_hint:{"top": .13, "center_x": .07}
                font_size:20
                markup:True
                text:'Fecha'

            Label:
                id:hora
                size_hint:.1,.1
                pos_hint:{"top": .22, "center_x": .23}
                font_size:20
                markup:True
                text:'00:00'
            BotonImagen:

                id:internet0
                size_hint: .11, .17
                source:'data/internet.png'
                pos_hint:{"top": 1., "center_x": .95}

            Label:
                id:fecha
                size_hint:.1,.1
                pos_hint:{"top": .13, "center_x": .23}
                font_size:20
                markup:True
                text:'01/01/2020'




    Fondo:
        name:'menu1'
        FloatLayout:
            Label:
                id:title_1
			    font_size:25
			#font_name:'Arial'
			    text: "ZONA 1"
			    pos_hint:{"top": .97, "center_x": .5}
			    size_hint: .5, .1

			Etiqueta:
				text:"T.EXTERIOR:"
				pos_hint:{"top":.8,"x": .08}

			Label:
				id:t_ext1
				font_size:25
				#font_name:'Arial'
				text: '[color=00BDFF]'+ str(app.t_ext) + '[/color]'
				markup:True
				pos_hint:{"top": .8, "x": .22}
				size_hint: .3, .1
				halign: 'center'


			Etiqueta:
				text:"T.AMBIENTE:"
				pos_hint:{"top":.7,"x": .08}

			Label:
				id:t_amb1
				font_size:25
				#font_name:'Arial'
				text: str(app.t_amb[0])
				markup:True
				pos_hint:{"top": .7, "x": .22}
				size_hint: .3, .1
				halign: 'center'

			Etiqueta:
				text:"ESTADO REGULACIÓN:"
				pos_hint:{"top":.6,"x": .08}

			Label:
			    id:abriendo1
				font_size:25
				#font_name:'Arial'
				text: "Calculando"
				markup:True
				pos_hint:{"top": .6, "x": .22}
				size_hint: .3, .1
				halign: 'center'

			Etiqueta:
				text:"MODO FUNCIONAMIENTO:"
				pos_hint:{"top":.5,"x": .08}

			Label:
                id:modo1
				font_size:25
				#font_name:'Arial'
				text: '[color=00FFC5]'+ app.modo.capitalize() +'[/color]'
				markup:True
				pos_hint:{"top": .5, "x": .22}
				size_hint: .3, .1
				halign: 'center'
			BotonAbajo:
				pos_hint:{"center_x": .2, "y":.0}
				source:"data/invierno.png"
				on_release:sm.current = 'consignas_z1'
			BotonAbajo:
				pos_hint:{"center_x": .5, "y": .0}
				on_press:sm.current="scheduler"
				source:"data/calendario.png"


			BotonAbajo:
				pos_hint:{"center_x": .8, "y": .0}
				source:"data/home.png"

				on_press:sm.current ='menu0'

			BotonArriba: #Derecha Internet
				pos_hint:{"center_x": .94, "y":.87}
				source:"data/wifi.png"
				on_press:root.dummy()

			Label:
				id:consigna1
				font_size:80
				#font_name:'Arial'
				text: '[color=1ED760]'+ str(app.consignas[0])+'[/color]'
				markup:True
				pos_hint:{"top": .75, "x": .45}
				size_hint: .3, .3

			Button:
				font_size: 50
				text : "+"
				pos_hint:{"top": .72, "x": .68}
				size_hint: .1, .1

				on_press:root.cambiar_consigna(1,1)
				on_press:app.cambiar_consigna(1,0)

			Button:
				font_size: 50
				text : "-"
				pos_hint:{"top": .6, "x": .68}
				size_hint: .1, .1
				on_press:root.cambiar_consigna(-1,1)
				on_press:app.cambiar_consigna(-1,0)

			BotonAbajo:

				pos_hint:{"center_y": .5, "center_x": .94}
				size_hint: .12, .17
				source:"data/flecha.png"
				on_press:app.camzona(1)
				on_press:sm.current ='menu2'


    Fondo:
        name:'menu2'
        FloatLayout:
			Label:
			    id:title_2
				font_size:25
				#font_name:'Arial'
				text: "ZONA 2"
				pos_hint:{"top": .97, "center_x": .5}
				size_hint: .5, .1

			Etiqueta:
				text:"T.EXTERIOR:"
				pos_hint:{"top":.8,"x": .08}

			Label:
			    id:t_ext2
				font_size:25
				#font_name:'Arial'
				text: '[color=00BDFF]20[/color]'
				markup:True
				pos_hint:{"top": .8, "x": .22}
				size_hint: .3, .1
				halign: 'center'


			Etiqueta:
				text:"T.AMBIENTE:"
				pos_hint:{"top":.7,"x": .08}

			Label:
                id:t_amb2
				font_size:25
				#font_name:'Arial'
				text: '[color=00FF27]20[/color]'
				markup:True
				pos_hint:{"top": .7, "x": .22}
				size_hint: .3, .1
				halign: 'center'

			Etiqueta:
				text:"ESTADO REGULACIÓN:"
				pos_hint:{"top":.6,"x": .08}

			Label:
                id:abriendo2
				font_size:25
				#font_name:'Arial'
				text: 'Calculando'
				markup:True
				pos_hint:{"top": .6, "x": .22}
				size_hint: .3, .1
				halign: 'center'



			Etiqueta:
				text:"MODO FUNCIONAMIENTO:"
				pos_hint:{"top":.5,"x": .08}

			Label:
                id:modo2
				font_size:25
				#font_name:'Arial'
				text: '[color=00FFC5]'+ app.modo.capitalize() +'[/color]'
				markup:True
				pos_hint:{"top": .5, "x": .22}
				size_hint: .3, .1
				halign: 'center'
			BotonAbajo:
				pos_hint:{"center_x": .2, "y":.0}
				source:"data/invierno.png"
				on_release:sm.current ='consignas_z2'
			BotonAbajo:
				pos_hint:{"center_x": .5, "y": .0}
				on_press:sm.current ='scheduler'
				on_press:app.cambiar_dia()
				source:"data/calendario.png"

			BotonAbajo:
				pos_hint:{"center_x": .8, "y": .0}
				on_press:sm.current ='menu0'
				source:"data/home.png"


			BotonArriba: #Derecha Internet
				pos_hint:{"center_x": .94, "y":.87}
				source:"data/wifi.png"
				on_press:root.dummy()

			Label:
				id:consigna2
				font_size:80
				#font_name:'Arial'
				text: '[color=1ED760]'+str(app.consignas[1]) +'[/color]'
				markup:True
				pos_hint:{"top": .75, "x": .45}
				size_hint: .3, .3

			Button:
				font_size: 50
				text : "+"
				pos_hint:{"top": .72, "x": .68}
				size_hint: .1, .1
				on_press:root.cambiar_consigna(1,2)
				on_press:app.cambiar_consigna(1,1)

			Button:
				font_size: 50
				text : "-"
				pos_hint:{"top": .6, "x": .68}
				size_hint: .1, .1
				on_press:root.cambiar_consigna(-1,2)
				on_press:app.cambiar_consigna(-1,1)

			BotonAbajo:

				pos_hint:{"center_y": .5, "center_x": .94}
				size_hint: .12, .17
				source:"data/flecha.png"
				on_press:sm.current ='menu3'

	Fondo:
        name:'menu3'
        FloatLayout:
			Label:
			    id:title_3
				font_size:25
				#font_name:'Arial'
				text: "ZONA 3"
				pos_hint:{"top": .97, "center_x": .5}
				size_hint: .5, .1

			Etiqueta:
				text:"T.EXTERIOR:"
				pos_hint:{"top":.8,"x": .08}

			Label:
			    id:t_ext3
				font_size:25
				#font_name:'Arial'
				text: '[color=00BDFF]20[/color]'
				markup:True
				pos_hint:{"top": .8, "x": .22}
				size_hint: .3, .1
				halign: 'center'


			Etiqueta:
				text:"T.AMBIENTE:"
				pos_hint:{"top":.7,"x": .08}

			Label:
                id:t_amb3
				font_size:25
				#font_name:'Arial'
				text: '[color=00FF27]20[/color]'
				markup:True
				pos_hint:{"top": .7, "x": .22}
				size_hint: .3, .1
				halign: 'center'

			Etiqueta:
				text:"Estado bomba:"
				pos_hint:{"top":.6,"x": .08}

			Label:
                id:abriendo3
				font_size:25
				#font_name:'Arial'
				text: 'Calculando'
				markup:True
				pos_hint:{"top": .6, "x": .22}
				size_hint: .3, .1
				halign: 'center'



			Etiqueta:
				text:"MODO FUNCIONAMIENTO:"
				pos_hint:{"top":.5,"x": .08}

			Label:
                id:modo3
				font_size:25
				#font_name:'Arial'
				text: '[color=00FFC5]'+ app.modo.capitalize() +'[/color]'
				markup:True
				pos_hint:{"top": .5, "x": .22}
				size_hint: .3, .1
				halign: 'center'


			BotonAbajo:
				pos_hint:{"center_x": .9, "y": .0}
				on_press:sm.current ='menu0'
				source:"data/home.png"


			BotonArriba: #Derecha Internet
				pos_hint:{"center_x": .94, "y":.87}
				source:"data/wifi.png"
				on_press:root.dummy()

			Label:
				id:consigna3
				font_size:80
				#font_name:'Arial'
				text: '[color=1ED760]'+str(app.consignas[1]) +'[/color]'
				markup:True
				pos_hint:{"top": .75, "x": .45}
				size_hint: .3, .3

			Button:
				font_size: 50
				text : "+"
				pos_hint:{"top": .72, "x": .68}
				size_hint: .1, .1

				on_press:app.cambiar_consigna(1,2)

			Button:
				font_size: 50
				text : "-"
				pos_hint:{"top": .6, "x": .68}
				size_hint: .1, .1

				on_press:app.cambiar_consigna(-1,2)

			BotonAbajo:

				pos_hint:{"center_y": .5, "center_x": .94}
				size_hint: .12, .17
				source:"data/flecha.png"
				on_press:app.camzona(0)
				on_press:sm.current ='menu1'
	Fondo:
	    name:'modos_func'
	    FloatLayout:
			BotonAbajo:

				pos_hint:{"center_x": .9, "y": .0}
				source:"data/home.png"
				on_release:sm.current ='menu0'
			BoxLayout:
				pos_hint:{"center_x": .5, "center_y": .5}
				size_hint:.4,.7
				orientation:'vertical'
				spacing:35
				ToggleButton:
					id:tb_winter
					font_size:25
					text:"Invierno"
					group:"Modo"
					state: app.states['winter']
					on_press: app.cambiar_modo("invierno")
					on_press:modo0.text = '[b][color=FF1700] MODO CALEFACCION [/color][/b]'
				ToggleButton:
					id:tb_summer
					font_size:25
					text:"Verano"
					group:"Modo"
					state: app.states['summer']
					on_press: app.cambiar_modo("verano")
					on_press:modo0.text = '[b][color=5FE5B5] MODO REFRIGERACION [/color][/b]'
				ToggleButton:
					id:no_ice
					font_size:25
					text:"Antihielo"
					group:"Modo"
					state: app.states['noice']
					on_press: app.cambiar_modo("antihielo")
					on_press:modo0.text = '[b][color=A49B0F] APAGADO [/color][/b]'
	Fondo:
	    name:'ajustes'
		FloatLayout:

			BotonAbajo:

				pos_hint:{"center_x": .9, "y": .0}
				source:"data/home.png"
				on_release:sm.current ='menu0'
			BoxLayout:
				pos_hint:{"center_x": .5, "y": .3}
				size_hint:.5,.5
				orientation:'vertical'

				Button:

					text:"Tipo curva"
					font_size:25
					on_press: sm.current ='curva'

				Button:

					text:"Modo Bomba"
					font_size:25
					on_press: sm.current ='bomba'
				Button:
					text:"Login"
					font_size:25
					on_press: sm.current ='login'

	Fondo:
	    name:'curva'
		FloatLayout:
		    BotonAbajo:

				source:"data/flecha_atras.png"
				pos_hint:{"center_x": .1, "y": .0}

				on_release:sm.current = 'ajustes'

			BotonAbajo:

				pos_hint:{"center_x": .9, "y": .0}
				source:"data/home.png"
				on_release:sm.current ='menu0'
			BoxLayout:
				pos_hint:{"center_x": .25, "center_y": .7}
				size_hint:.4,.6
				orientation:'vertical'
				Label:
					text: "Zona 1"

				ToggleButton:
					text:"Normal"
					font_size:25
					group:"zona1"
					state: app.estado_curvas[0]["b1"]
					on_press: app.modo_curva(0,0)
				ToggleButton:
					text:"Intensa"
					font_size:25
					group:"zona1"
					state: app.estado_curvas[0]["b2"]
					on_press: app.modo_curva(1,0)
				ToggleButton:
					text:"Suave"
					font_size:25
					group:"zona1"
					state: app.estado_curvas[0]["b3"]
					on_press: app.modo_curva(2,0)

			BoxLayout:
				pos_hint:{"center_x": .75, "center_y": .7}
				size_hint:.4,.6
				orientation:'vertical'

				Label:
					text: "Zona 2"

				ToggleButton:
					text:"Normal"
					font_size:25
					group:"zona2"
					state: app.estado_curvas[1]["b1"]
					on_press: app.modo_curva(0,1)
				ToggleButton:
					text:"Intenso"
					font_size:25
					group:"zona2"
					state: app.estado_curvas[1]["b2"]
					on_press: app.modo_curva(1,1)
				ToggleButton:
					text:"Suave"
					font_size:25
					group:"zona2"
					state: app.estado_curvas[1]["b3"]
					on_press: app.modo_curva(2,1)

	Fondo:
	    name:'login'
	    FloatLayout:
			BotonAbajo:

				source:"data/home.png"
				pos_hint:{"center_x": .9, "y": .0}

				on_release:sm.current = 'menu0'

			BotonAbajo:

				source:"data/flecha_atras.png"
				pos_hint:{"center_x": .1, "y": .0}

				on_release:sm.current = 'ajustes'
			BoxLayout:
				size_hint: .2, .2
				pos_hint:{"center_x": .5, "center_y": .8}
				orientation: 'vertical'
				spacing:6

				Label:
					text: 'User'
					font_size: 18
					halign: 'left'

				TextInput:
					id: user
					multiline:False
					font_size: 18

			BoxLayout:
				size_hint: .2, .2
				pos_hint:{"center_x": .5, "center_y": .6}
				orientation: 'vertical'
				Label:
					text: 'Password'
					halign: 'left'
					font_size: 18


				TextInput:
					id:passw
					multiline:False
					password:True
					font_size: 18

			Button:
				size_hint: .2,.2
				pos_hint:{"center_x": .78, "center_y": .65}
				text: 'Login'
				font_size: 15
				on_press: app.do_login(user.text, passw.text)


	Fondo:
	    name:'bomba'
	    FloatLayout:
	        BotonAbajo:

				source:"data/flecha_atras.png"
				pos_hint:{"center_x": .1, "y": .0}

				on_release:sm.current = 'ajustes'
			BotonAbajo:

				pos_hint:{"center_x": .9, "y": .0}
				source:"data/home.png"
				on_release:sm.current ='menu0'
			BoxLayout:
				pos_hint:{"center_x": .25, "center_y": .7}
				size_hint:.4,.6
				orientation:'vertical'
				Label:
					text: "Zona 1"

				ToggleButton:
					text:"Continuo"
					font_size:25
					group:"zona1"
					state: app.estado_bombas[0]["b1"]
					on_press: app.modo_bomba(0,False)
				ToggleButton:
					text:"Modo ECO"
					font_size:25
					group:"zona1"
					state: app.estado_bombas[0]["b2"]
					on_press: app.modo_bomba(0,True)

			BoxLayout:
				pos_hint:{"center_x": .75, "center_y": .7}
				size_hint:.4,.6
				orientation:'vertical'
				Label:
					text: "Zona 2"

				ToggleButton:
					text:"Continuo"
					font_size:25
					group:"zona2"
					state: app.estado_bombas[1]["b1"]
					on_press: app.modo_bomba(1,False)
				ToggleButton:
					text:"Modo ECO"
					font_size:25
					group:"zona2"
					state: app.estado_bombas[1]["b2"]
					on_press: app.modo_bomba(1,True)

    Fondo:
        name:"scheduler"
        FloatLayout:
            BotonAbajo:

				pos_hint:{"center_x": .9, "y": .0}
				source:"data/home.png"
				on_release:app.backzone()
            BotonAbajo:

				pos_hint:{"center_x": .9, "y": .0}
				source:"data/home.png"
				on_release:sm.current ='menu0'
			Button:
			    size_hint: .2, .1
			    pos_hint:{"center_x": .5, "y": .05}
			    text:'Reset'
			    on_press: app.reset_sched()
            Spinner:
                id:dias
                font_size:15
                size_hint: .2, .1
                pos_hint:{"top": .95, "center_x": .45}

                text: 'Lunes'
                values: ('Lunes', 'Martes', 'Miercoles', 'Jueves','Viernes','Sabado','Domingo')

                option_cls: Factory.get("DiasScheduler")
            Label:
                text:'Copiar a:'
                size_hint: .2, .1
                pos_hint:{"top": .4, "center_x": .4}
            Spinner:
                id:copiar_a
                font_size:15
                size_hint: .2, .1
                pos_hint:{"top": .4, "center_x": .55}
                values: ('Laborables', 'Fin de semana', 'Todos')
                text: '-'

                option_cls: Factory.get("CopiarDia")


            Label:
                id:sched_err
                text:""
                font_size:15
                size_hint: .2, .15
                pos_hint:{"top": .1, "center_x": .5}

            BoxLayout:
                pos_hint:{"center_y": .55, "center_x": .54}
                size_hint:.5, .1
                CheckBox:
                    id:confort
                    group:'prog'
                    state:'down'

                CheckBox:
                    id:reducido
                    group:'prog'

                CheckBox:
                    id:apagado
                    group:'prog'
            BotonImagen:
                size_hint:.1,.2
                pos_hint:{"center_y": .85, "center_x": .9}
                source:'data/guardar.png'
                on_release:app.copiar_sched()
            BoxLayout:
                pos_hint:{"center_y": .7, "center_x": .55}
                size_hint:.5, .2
                BotonImagen:
                    source:'data/confortfinal.png'
                    on_press:confort.state='down'

                BotonImagen:
                    source:'data/reducidofinal.png'
                    on_press:reducido.state='down'


                BotonImagen:
                    source:'data/apagadofinal.png'
                    on_press:apagado.state='down'


            BoxLayout:
                orientation:'vertical'
                pos_hint:{"center_y": .5, "center_x": .1}
                size_hint:.1, .95
                spacing:5
                BackgroundLabel:
                    id:h00
                    text:'00'
                    on_press:self.background_color=rojo if confort.state=='down' else naranja if reducido.state=='down' else azul if apagado.state=='down' else self.background_color
                    on_press:app.set_sched_hora(0,dias.text,0) if confort.state=='down' else app.set_sched_hora(0,dias.text,1) if reducido.state=='down' else app.set_sched_hora(0,dias.text,2) if apagado.state=='down' else app.dummy()
                BackgroundLabel:
                    id:h01
                    text:'01'
                    on_press:self.background_color=rojo if confort.state=='down' else naranja if reducido.state=='down' else azul if apagado.state=='down' else self.background_color
                    on_press:app.set_sched_hora(1,dias.text,0) if confort.state=='down' else app.set_sched_hora(1,dias.text,1) if reducido.state=='down' else app.set_sched_hora(1,dias.text,2) if apagado.state=='down' else app.dummy()
                BackgroundLabel:
                    id:h02
                    text:'02'
                    on_press:self.background_color=rojo if confort.state=='down' else naranja if reducido.state=='down' else azul if apagado.state=='down' else self.background_color
                    on_press:app.set_sched_hora(2,dias.text,0) if confort.state=='down' else app.set_sched_hora(2,dias.text,1) if reducido.state=='down' else app.set_sched_hora(2,dias.text,2) if apagado.state=='down' else app.dummy()
                BackgroundLabel:
                    id:h03
                    text:'03'
                    on_press:self.background_color=rojo if confort.state=='down' else naranja if reducido.state=='down' else azul if apagado.state=='down' else self.background_color
                    on_press:app.set_sched_hora(3,dias.text,0) if confort.state=='down' else app.set_sched_hora(3,dias.text,1) if reducido.state=='down' else app.set_sched_hora(3,dias.text,2) if apagado.state=='down' else app.dummy()
                BackgroundLabel:
                    id:h04
                    text:'04'
                    on_press:self.background_color=rojo if confort.state=='down' else naranja if reducido.state=='down' else azul if apagado.state=='down' else self.background_color
                    on_press:app.set_sched_hora(4,dias.text,0) if confort.state=='down' else app.set_sched_hora(4,dias.text,1) if reducido.state=='down' else app.set_sched_hora(4,dias.text,2) if apagado.state=='down' else app.dummy()
                BackgroundLabel:
                    id:h05
                    text:'05'
                    on_press:self.background_color=rojo if confort.state=='down' else naranja if reducido.state=='down' else azul if apagado.state=='down' else self.background_color
                    on_press:app.set_sched_hora(5,dias.text,0) if confort.state=='down' else app.set_sched_hora(5,dias.text,1) if reducido.state=='down' else app.set_sched_hora(5,dias.text,2) if apagado.state=='down' else app.dummy()
                BackgroundLabel:
                    id:h06
                    text:'06'
                    on_press:self.background_color=rojo if confort.state=='down' else naranja if reducido.state=='down' else azul if apagado.state=='down' else self.background_color
                    on_press:app.set_sched_hora(6,dias.text,0) if confort.state=='down' else app.set_sched_hora(6,dias.text,1) if reducido.state=='down' else app.set_sched_hora(6,dias.text,2) if apagado.state=='down' else app.dummy()
                BackgroundLabel:
                    id:h07
                    text:'07'
                    on_press:self.background_color=rojo if confort.state=='down' else naranja if reducido.state=='down' else azul if apagado.state=='down' else self.background_color
                    on_press:app.set_sched_hora(7,dias.text,0) if confort.state=='down' else app.set_sched_hora(7,dias.text,1) if reducido.state=='down' else app.set_sched_hora(7,dias.text,2) if apagado.state=='down' else app.dummy()
                BackgroundLabel:
                    id:h08
                    text:'08'
                    on_press:self.background_color=rojo if confort.state=='down' else naranja if reducido.state=='down' else azul if apagado.state=='down' else self.background_color
                    on_press:app.set_sched_hora(8,dias.text,0) if confort.state=='down' else app.set_sched_hora(8,dias.text,1) if reducido.state=='down' else app.set_sched_hora(8,dias.text,2) if apagado.state=='down' else app.dummy()
                BackgroundLabel:
                    id:h09
                    text:'09'
                    on_press:self.background_color=rojo if confort.state=='down' else naranja if reducido.state=='down' else azul if apagado.state=='down' else self.background_color
                    on_press:app.set_sched_hora(9,dias.text,0) if confort.state=='down' else app.set_sched_hora(9,dias.text,1) if reducido.state=='down' else app.set_sched_hora(9,dias.text,2) if apagado.state=='down' else app.dummy()
                BackgroundLabel:
                    id:h10
                    text:'10'
                    on_press:self.background_color=rojo if confort.state=='down' else naranja if reducido.state=='down' else azul if apagado.state=='down' else self.background_color
                    on_press:app.set_sched_hora(10,dias.text,0) if confort.state=='down' else app.set_sched_hora(10,dias.text,1) if reducido.state=='down' else app.set_sched_hora(10,dias.text,2) if apagado.state=='down' else app.dummy()
                BackgroundLabel:
                    id:h11
                    text:'11'
                    on_press:self.background_color=rojo if confort.state=='down' else naranja if reducido.state=='down' else azul if apagado.state=='down' else self.background_color
                    on_press:app.set_sched_hora(11,dias.text,0) if confort.state=='down' else app.set_sched_hora(11,dias.text,1) if reducido.state=='down' else app.set_sched_hora(11,dias.text,2) if apagado.state=='down' else app.dummy()
            BoxLayout:
                orientation:'vertical'
                pos_hint:{"center_y": .5, "center_x": .25}
                size_hint:.1, .95
                spacing:5

                BackgroundLabel:
                    id:h12
                    text:'12'
                    on_press:self.background_color=rojo if confort.state=='down' else naranja if reducido.state=='down' else azul if apagado.state=='down' else self.background_color
                    on_press:app.set_sched_hora(12,dias.text,0) if confort.state=='down' else app.set_sched_hora(12,dias.text,1) if reducido.state=='down' else app.set_sched_hora(12,dias.text,2) if apagado.state=='down' else app.dummy()
                BackgroundLabel:
                    id:h13
                    text:'13'
                    on_press:self.background_color=rojo if confort.state=='down' else naranja if reducido.state=='down' else azul if apagado.state=='down' else self.background_color
                    on_press:app.set_sched_hora(13,dias.text,0) if confort.state=='down' else app.set_sched_hora(13,dias.text,1) if reducido.state=='down' else app.set_sched_hora(13,dias.text,2) if apagado.state=='down' else app.dummy()
                BackgroundLabel:
                    id:h14
                    text:'14'
                    on_press:self.background_color=rojo if confort.state=='down' else naranja if reducido.state=='down' else azul if apagado.state=='down' else self.background_color
                    on_press:app.set_sched_hora(14,dias.text,0) if confort.state=='down' else app.set_sched_hora(14,dias.text,1) if reducido.state=='down' else app.set_sched_hora(14,dias.text,2) if apagado.state=='down' else app.dummy()
                BackgroundLabel:
                    id:h15
                    text:'15'
                    on_press:self.background_color=rojo if confort.state=='down' else naranja if reducido.state=='down' else azul if apagado.state=='down' else self.background_color
                    on_press:app.set_sched_hora(15,dias.text,0) if confort.state=='down' else app.set_sched_hora(15,dias.text,1) if reducido.state=='down' else app.set_sched_hora(15,dias.text,2) if apagado.state=='down' else app.dummy()
                BackgroundLabel:
                    id:h16
                    text:'16'
                    on_press:self.background_color=rojo if confort.state=='down' else naranja if reducido.state=='down' else azul if apagado.state=='down' else self.background_color
                    on_press:app.set_sched_hora(16,dias.text,0) if confort.state=='down' else app.set_sched_hora(16,dias.text,1) if reducido.state=='down' else app.set_sched_hora(16,dias.text,2) if apagado.state=='down' else app.dummy()
                BackgroundLabel:
                    id:h17
                    text:'17'
                    on_press:self.background_color=rojo if confort.state=='down' else naranja if reducido.state=='down' else azul if apagado.state=='down' else self.background_color
                    on_press:app.set_sched_hora(17,dias.text,0) if confort.state=='down' else app.set_sched_hora(17,dias.text,1) if reducido.state=='down' else app.set_sched_hora(17,dias.text,2) if apagado.state=='down' else app.dummy()
                BackgroundLabel:
                    id:h18
                    text:'18'
                    on_press:self.background_color=rojo if confort.state=='down' else naranja if reducido.state=='down' else azul if apagado.state=='down' else self.background_color
                    on_press:app.set_sched_hora(18,dias.text,0) if confort.state=='down' else app.set_sched_hora(18,dias.text,1) if reducido.state=='down' else app.set_sched_hora(18,dias.text,2) if apagado.state=='down' else app.dummy()
                BackgroundLabel:
                    id:h19
                    text:'19'
                    on_press:self.background_color=rojo if confort.state=='down' else naranja if reducido.state=='down' else azul if apagado.state=='down' else self.background_color
                    on_press:app.set_sched_hora(19,dias.text,0) if confort.state=='down' else app.set_sched_hora(19,dias.text,1) if reducido.state=='down' else app.set_sched_hora(19,dias.text,2) if apagado.state=='down' else app.dummy()
                BackgroundLabel:
                    id:h20
                    text:'20'
                    on_press:self.background_color=rojo if confort.state=='down' else naranja if reducido.state=='down' else azul if apagado.state=='down' else self.background_color
                    on_press:app.set_sched_hora(20,dias.text,0) if confort.state=='down' else app.set_sched_hora(20,dias.text,1) if reducido.state=='down' else app.set_sched_hora(20,dias.text,2) if apagado.state=='down' else app.dummy()
                BackgroundLabel:
                    id:h21
                    text:'21'
                    on_press:self.background_color=rojo if confort.state=='down' else naranja if reducido.state=='down' else azul if apagado.state=='down' else self.background_color
                    on_press:app.set_sched_hora(21,dias.text,0) if confort.state=='down' else app.set_sched_hora(21,dias.text,1) if reducido.state=='down' else app.set_sched_hora(21,dias.text,2) if apagado.state=='down' else app.dummy()
                BackgroundLabel:
                    id:h22
                    text:'22'
                    on_press:self.background_color=rojo if confort.state=='down' else naranja if reducido.state=='down' else azul if apagado.state=='down' else self.background_color
                    on_press:app.set_sched_hora(22,dias.text,0) if confort.state=='down' else app.set_sched_hora(22,dias.text,1) if reducido.state=='down' else app.set_sched_hora(22,dias.text,2) if apagado.state=='down' else app.dummy()
                BackgroundLabel:
                    id:h23
                    text:'23'
                    on_press:self.background_color=rojo if confort.state=='down' else naranja if reducido.state=='down' else azul if apagado.state=='down' else self.background_color
                    on_press:app.set_sched_hora(23,dias.text,0) if confort.state=='down' else app.set_sched_hora(23,dias.text,1) if reducido.state=='down' else app.set_sched_hora(23,dias.text,2) if apagado.state=='down' else app.dummy()


    Fondo:
        name:"sensores"

        FloatLayout:
            BotonAbajo:
				pos_hint:{"center_x": .9, "y": .0}
				source:"data/home.png"
				on_release:sm.current ='menu0'
            Label:
                text:"ZONA 1"
                pos_hint:{"top": .9, "center_x": .4}
                size_hint: .2, .15

            Label:
                text:"ZONA 2"
                pos_hint:{"top": .9, "center_x": .6}
                size_hint: .2, .15

            Label:
                text:"ZONA 3"
                pos_hint:{"top": .9, "center_x": .8}
                size_hint: .2, .15

            Label:
                text:"Temp Ambiente"
                pos_hint:{"top": .75, "center_x": .15}
                size_hint: .2, .15


            Label:
                id:t_amb_z1
                text:str(app.t_amb[0])
                markup:True
                pos_hint:{"top": .75, "center_x": .4}
                size_hint: .2, .15

            Label:
                id:t_amb_z2
                text:str(app.t_amb[1])
                markup:True
                pos_hint:{"top": .75, "center_x": .6}
                size_hint: .2, .15

            Label:
                id:t_amb_z3
                text:str(app.t_amb[2])
                markup:True
                pos_hint:{"top": .75, "center_x": .8}
                size_hint: .2, .15

            Label:
                text:"Temp Suelo"
                pos_hint:{"top": .6, "center_x": .15}
                size_hint: .2, .15


            Label:
                id:t_suelo_z1
                markup:True
                text:str(app.t_suelo[0])
                pos_hint:{"top": .6, "center_x": .4}
                size_hint: .2, .15

            Label:
                id:t_suelo_z2
                markup:True
                text:str(app.t_suelo[1])
                pos_hint:{"top": .6, "center_x": .6}
                size_hint: .2, .15

            Label:
                text:"Temp Agua"
                pos_hint:{"top": .45, "center_x": .15}
                size_hint: .2, .15


            Label:
                id:t_agua_z1
                markup:True
                text:str(app.t_suelo[0])
                pos_hint:{"top": .45, "center_x": .4}
                size_hint: .2, .15

            Label:
                id:t_agua_z2
                markup:True
                text:str(app.t_suelo[1])
                pos_hint:{"top": .45, "center_x": .6}
                size_hint: .2, .15

            Label:
                text:"Temp Exterior"
                pos_hint:{"top": .3, "center_x": .15}
                size_hint: .2, .15


            Label:
                id:t_exterior
                markup:True
                text:str(app.t_ext)
                pos_hint:{"top": .3, "center_x": .5}
                size_hint: .2, .15

    Fondo:
	    name:'ajustes'
		FloatLayout:

			BotonAbajo:

				pos_hint:{"center_x": .9, "y": .0}
				source:"data/home.png"
				on_release:sm.current ='menu0'
			BoxLayout:
				pos_hint:{"center_x": .5, "y": .3}
				size_hint:.5,.5
				orientation:'vertical'

				Button:

					text:"Tipo curva"
					on_press: sm.current ='curva'

				Button:

					text:"Modo Bomba"
					on_press: sm.current ='bomba'
				Button:
					text:"Login"
					on_press: sm.current ='login'

    Fondo:
	    name:'ajustes_admin'
		FloatLayout:

			BotonAbajo:
				pos_hint:{"center_x": .9, "y": .0}
				source:"data/home.png"
				on_release:sm.current ='menu0'

			BoxLayout:
				pos_hint:{"center_x": .5, "y": .3}
				size_hint:.5,.5
				orientation:'vertical'

				Button:

					text:"Tipo de sondas"
					font_size:25
					on_press: sm.current ='tipo_sondas'
				Button:

					text:"Cambiar seguridades"
					font_size:25
					on_press: sm.current ='seguridades'

				Button:
				    text: "Reestablecer ajustes de fábrica"
				    on_press:Factory.MyPopup().open()

    Fondo:
	    name:'tipo_sondas'
		FloatLayout:
            BotonAbajo:

				source:"data/flecha_atras.png"
				pos_hint:{"center_x": .1, "y": .0}

				on_press:sm.current = 'ajustes_admin'
			BotonAbajo:
				pos_hint:{"center_x": .9, "y": .0}
				source:"data/home.png"
				on_release:sm.current ='menu0'

			BoxLayout:
				pos_hint:{"center_x": .15, "center_y": .65}
				size_hint:.1,.5
				orientation:'vertical'
				Label:
				    text:'Exterior'
				    font_size:10
				ToggleButton:
				    text:"PT1000"
				    font_size:15
				    group:"sondas1"
				    state: app.states_sondas[0]["b1"]
				    on_press:app.cambia_sonda(1,0)

				ToggleButton:
				    text:"NTC"
				    font_size:15
				    group:"sondas1"
				    state: app.states_sondas[0]["b2"]
				    on_press:app.cambia_sonda(0,0)

			BoxLayout:
				pos_hint:{"center_x": .25, "center_y": .65}
				size_hint:.1,.5
				orientation:'vertical'
				Label:
				    text:'Suelo 1'
				    font_size:10
				ToggleButton:
				    text:"PT1000"
				    font_size:15
				    group:"sondas2"
				    state: app.states_sondas[1]["b1"]
				    on_press:app.cambia_sonda(1,1)

				ToggleButton:
				    text:"NTC"
				    font_size:15
				    group:"sondas2"
				    state: app.states_sondas[1]["b2"]
				    on_press:app.cambia_sonda(0,1)

			BoxLayout:
				pos_hint:{"center_x": .35, "center_y": .65}
				size_hint:.1,.5
				orientation:'vertical'
				Label:
				    text:'Agua 1'
				    font_size:10
				ToggleButton:
				    text:"PT1000"
				    font_size:15
				    group:"sondas3"
				    state: app.states_sondas[2]["b1"]
				    on_press:app.cambia_sonda(1,2)

				ToggleButton:
				    text:"NTC"
				    font_size:15
				    group:"sondas3"
				    state: app.states_sondas[1]["b2"]
				    on_press:app.cambia_sonda(0,2)

			BoxLayout:
				pos_hint:{"center_x": .45, "center_y": .65}
				size_hint:.1,.5
				orientation:'vertical'
				Label:
				    text:'Ambiente 1'
				    font_size:10
				ToggleButton:
				    text:"PT1000"
				    font_size:15
				    group:"sondas4"
				    state: app.states_sondas[3]["b1"]
				    on_press:app.cambia_sonda(1,3)

				ToggleButton:
				    text:"NTC"
				    font_size:15
				    group:"sondas4"
				    state: app.states_sondas[3]["b2"]
				    on_press:app.cambia_sonda(0,3)

			BoxLayout:
				pos_hint:{"center_x": .55, "center_y": .65}
				size_hint:.1,.5
				orientation:'vertical'
				Label:
				    text:'Suelo 2'
				    font_size:10
				ToggleButton:
				    text:"PT1000"
				    font_size:15
				    group:"sondas5"
				    state: app.states_sondas[4]["b1"]
				    on_press:app.cambia_sonda(1,4)

				ToggleButton:
				    text:"NTC"
				    font_size:15
				    group:"sondas5"
				    state: app.states_sondas[4]["b2"]
				    on_press:app.cambia_sonda(0,4)

			BoxLayout:
				pos_hint:{"center_x": .65, "center_y": .65}
				size_hint:.1,.5
				orientation:'vertical'
				Label:
				    text:'Agua 2'
				    font_size:10
				ToggleButton:
				    text:"PT1000"
				    font_size:15
				    group:"sondas6"
				    state: app.states_sondas[5]["b1"]
				    on_press:app.cambia_sonda(1,5)

				ToggleButton:
				    text:"NTC"
				    font_size:15
				    group:"sondas6"
				    state: app.states_sondas[5]["b2"]
				    on_press:app.cambia_sonda(0,5)

			BoxLayout:
				pos_hint:{"center_x": .75, "center_y": .65}
				size_hint:.1,.5
				orientation:'vertical'
				Label:
				    text:'Ambiente 2'
				    font_size:10
				ToggleButton:
				    text:"PT1000"
				    font_size:15
				    group:"sondas7"
				    state: app.states_sondas[6]["b1"]
				    on_press:app.cambia_sonda(1,6)

				ToggleButton:
				    text:"NTC"
				    font_size:15
				    group:"sondas7"
				    state: app.states_sondas[6]["b2"]
				    on_press:app.cambia_sonda(0,6)

			BoxLayout:
				pos_hint:{"center_x": .85, "center_y": .65}
				size_hint:.1,.5
				orientation:'vertical'
				Label:
				    text:'Ambiente 3'
				    font_size:10
				ToggleButton:
				    text:"PT1000"
				    font_size:15
				    group:"sondas8"
				    state: app.states_sondas[7]["b1"]
				    on_press:app.cambia_sonda(1,7)

				ToggleButton:
				    text:"NTC"
				    font_size:15
				    group:"sondas8"
				    state: app.states_sondas[7]["b2"]
				    on_press:app.cambia_sonda(0,7)
    Fondo:
        name:"seguridades"
        FloatLayout:

            Spinner:
                id:seg_zonas
                font_size:15
                size_hint: .2, .1
                pos_hint:{"top": .9, "center_x": .25}

                text: 'ZONA1'
                values: ('ZONA1', 'ZONA2','Comunes')
                option_cls: Factory.get("SecModes")
            Spinner:
                id:seg_modo
                font_size:15
                size_hint: .2, .1
                pos_hint:{"top": .9, "center_x": .5}

                text: 'Modo'
                values: ('Invierno', 'Verano','Antihielo')
                option_cls: Factory.get("SecModes")


            Spinner:
                id:seguridades
                font_size:15
                size_hint: .2, .1
                pos_hint:{"top": .9, "center_x": .75}

                text: 'Seguridades'
                values: ['T min Exterior'] if (seg_zonas.text=='Comunes' and (seg_modo.text == 'Antihielo' or seg_modo.text == 'Verano' )) else ('T min Suelo','T max Suelo','T max Agua') if seg_modo.text == 'Invierno' and (seg_zonas.text == 'ZONA1' or seg_zonas.text == 'ZONA2' )  else ('T min Suelo', 'T min Agua') if seg_modo.text == 'Verano' and (seg_zonas.text == 'ZONA1' or seg_zonas.text == 'ZONA2' ) else ('T min Agua','T max Agua','T min Suelo') if seg_modo.text == 'Antihielo' and (seg_zonas.text == 'ZONA1' or seg_zonas.text == 'ZONA2' ) else []
                option_cls: Factory.get("Securities")

            Label:
                text:'Valor actual:'
                font_size:15
                size_hint: .2, .1
                pos_hint:{"top": .6, "center_x": .2}

            Label:
                id:valor_actual
                text:'-'
                font_size:30
                size_hint: .2, .1
                pos_hint:{"top": .6, "center_x": .4}

            Label:
                text:'Nuevo valor:'
                font_size:15
                size_hint: .15, .1
                pos_hint:{"top": .6, "center_x": .6}

            TextInput:
                id:nuevo_valor
                text:''
                halign:'center'
                font_size:30
                size_hint: .15, .15
                pos_hint:{"top": .6, "center_x": .8}

            Button:
                text:"Guardar"
                font_size:30
                size_hint: .2, .15
                pos_hint:{"top": .2, "center_x": .5}
                on_press:app.set_seguridad()


            Label:
                id:sec_err
                text:""
                font_size:15
                size_hint: .2, .15
                pos_hint:{"top": .1, "center_x": .5}
            BotonAbajo:

				source:"data/flecha_atras.png"
				pos_hint:{"center_x": .1, "y": .0}

				on_press:sm.current = 'ajustes_admin'
			BotonAbajo:
				pos_hint:{"center_x": .9, "y": .0}
				source:"data/home.png"
				on_release:sm.current ='menu0'

	Fondo:
	    name:'consignas_z1'

	    BotonAbajo:
			pos_hint:{"center_x": .9, "y": .0}
			source:"data/home.png"
			on_release:sm.current ='menu0'
	    Label:
	        font_size:30
	        text:'Invierno'
	        size_hint: .2, .15
            pos_hint:{"center_y": .65, "center_x": .15}

        Label:
	        font_size:30
	        text:'Verano'
	        size_hint: .2, .15
            pos_hint:{"center_y": .35, "center_x": .15}
        Label:
	        font_size:30
	        text:'Confort'
	        size_hint: .2, .15
            pos_hint:{"center_y": .85, "center_x": .35}

        Label:
	        font_size:30
	        text:'Reducido'
	        size_hint: .2, .15
            pos_hint:{"center_y": .85, "center_x": .57}

        Label:
	        font_size:30
	        text:'Apagado'
	        size_hint: .2, .15
            pos_hint:{"center_y": .85, "center_x": .8}
        Label:
            id:cons_z1_inv_conf
	        font_size: 30
	        text:str(app.consignas[0])
	        size_hint: .2, .15
            pos_hint:{"center_y": .65, "center_x": .32}

        Button:
			font_size: 30
			text : "+"
			pos_hint:{"center_y": .68, "center_x": .4}
			size_hint: .06, .06
			on_press:root.cambiar_consigna(1,1)
			on_press:app.cambiar_consigna(1,0)

		Button:
			font_size: 30
			text : "-"
			pos_hint:{"center_y": .62, "center_x": .4}
			size_hint: .06, .06
			on_press:root.cambiar_consigna(-1,1)
			on_press:app.cambiar_consigna(-1,0)


        Label:
            id:cons_z1_inv_red
	        font_size: 30
	        text:str(app.reducido_inv[0])
	        size_hint: .2, .15
            pos_hint:{"center_y": .65, "center_x": .52}


        Button:
			font_size: 30
			text : "+"
			pos_hint:{"center_y": .68, "center_x": .6}
			size_hint: .06, .06
            on_release:app.cambiar_cons_reducido(1, 1, 'inv')
		Button:
			font_size: 30
			text : "-"
			pos_hint:{"center_y": .62, "center_x": .6}
			size_hint: .06, .06
            on_release:app.cambiar_cons_reducido(-1, 1, 'inv')
        Label:
            id:cons_z1_inv_apa
	        font_size: 30
	        text:str(app.apagado_inv[0])
	        size_hint: .2, .15
            pos_hint:{"center_y": .65, "center_x": .75}

        Button:
			font_size: 30
			text : "+"
			pos_hint:{"center_y": .68, "center_x": .83}
			size_hint: .06, .06
			on_release:app.cambiar_cons_apagado(1, 1, 'inv')

		Button:
			font_size: 30
			text : "-"
			pos_hint:{"center_y": .62, "center_x": .83}
			size_hint: .06, .06
			on_release:app.cambiar_cons_apagado(-1, 1, 'inv')



        Label:
            id:cons_z1_ver_conf
	        font_size: 30
	        text:str(app.consignas[0])
	        size_hint: .2, .15
            pos_hint:{"center_y": .35, "center_x": .32}

        Button:
			font_size: 30
			text : "+"
			pos_hint:{"center_y": .38, "center_x": .4}
			size_hint: .06, .06


		Button:
			font_size: 30
			text : "-"
			pos_hint:{"center_y": .32, "center_x": .4}
			size_hint: .06, .06

        Label:
            id:cons_z1_ver_red
	        font_size: 30
	        text:str(app.reducido_ver[0])
	        size_hint: .2, .15
            pos_hint:{"center_y": .35, "center_x": .52}


        Button:
			font_size: 30
			text : "+"
			pos_hint:{"center_y": .38, "center_x": .6}
			size_hint: .06, .06
			on_release:app.cambiar_cons_reducido(1, 1, 'ver')

		Button:
			font_size: 30
			text : "-"
			pos_hint:{"center_y": .32, "center_x": .6}
			size_hint: .06, .06
			on_release:app.cambiar_cons_reducido(-1, 1, 'ver')

        Label:
            id:cons_z1_ver_apa
	        font_size: 30
	        text:str(app.apagado_ver[0])
	        size_hint: .2, .15
            pos_hint:{"center_y": .35, "center_x": .75}

        Button:
			font_size: 30
			text : "+"
			pos_hint:{"center_y": .38, "center_x": .83}
			size_hint: .06, .06
			on_release:app.cambiar_cons_apagado(1, 1, 'ver')

		Button:
			font_size: 30
			text : "-"
			pos_hint:{"center_y": .32, "center_x": .83}
			size_hint: .06, .06
			on_release:app.cambiar_cons_apagado(-1, 1, 'ver')

	Fondo:
	    name:'consignas_z2'
        BotonAbajo:
			pos_hint:{"center_x": .1, "y": .0}
			source:"data/flecha_atras.png"
			on_release:sm.current ='menu2'
	    BotonAbajo:
			pos_hint:{"center_x": .9, "y": .0}
			source:"data/home.png"
			on_release:sm.current ='menu0'
	    Label:
	        font_size:30
	        text:'Invierno'
	        size_hint: .2, .15
            pos_hint:{"center_y": .65, "center_x": .15}

        Label:
	        font_size:30
	        text:'Verano'
	        size_hint: .2, .15
            pos_hint:{"center_y": .35, "center_x": .15}
        Label:
	        font_size:30
	        text:'Confort'
	        size_hint: .2, .15
            pos_hint:{"center_y": .85, "center_x": .35}

        Label:
	        font_size:30
	        text:'Reducido'
	        size_hint: .2, .15
            pos_hint:{"center_y": .85, "center_x": .57}

        Label:
	        font_size:30
	        text:'Apagado'
	        size_hint: .2, .15
            pos_hint:{"center_y": .85, "center_x": .8}
        Label:
            id:cons_z2_inv_conf
	        font_size: 30
	        text:str(app.consignas[1])
	        size_hint: .2, .15
            pos_hint:{"center_y": .65, "center_x": .32}

        Button:
			font_size: 30
			text : "+"
			pos_hint:{"center_y": .68, "center_x": .4}
			size_hint: .06, .06
			on_press:root.cambiar_consigna(1,2)
			on_press:app.cambiar_consigna(1,1)

		Button:
			font_size: 30
			text : "-"
			pos_hint:{"center_y": .62, "center_x": .4}
			size_hint: .06, .06
			on_press:root.cambiar_consigna(-1,2)
			on_press:app.cambiar_consigna(-1,1)


        Label:
            id:cons_z2_inv_red
	        font_size: 30
	        text:str(app.reducido_inv[1])
	        size_hint: .2, .15
            pos_hint:{"center_y": .65, "center_x": .52}


        Button:
			font_size: 30
			text : "+"
			pos_hint:{"center_y": .68, "center_x": .6}
			size_hint: .06, .06
            on_release:app.cambiar_cons_reducido(1, 2, 'inv')
		Button:
			font_size: 30
			text : "-"
			pos_hint:{"center_y": .62, "center_x": .6}
			size_hint: .06, .06
            on_release:app.cambiar_cons_reducido(-1, 2, 'inv')
        Label:
            id:cons_z2_inv_apa
	        font_size: 30
	        text:str(app.apagado_inv[0])
	        size_hint: .2, .15
            pos_hint:{"center_y": .65, "center_x": .75}

        Button:
			font_size: 30
			text : "+"
			pos_hint:{"center_y": .68, "center_x": .83}
			size_hint: .06, .06
			on_release:app.cambiar_cons_apagado(1, 2, 'inv')

		Button:
			font_size: 30
			text : "-"
			pos_hint:{"center_y": .62, "center_x": .83}
			size_hint: .06, .06
			on_release:app.cambiar_cons_apagado(-1, 2, 'inv')



        Label:
            id:cons_z2_ver_conf
	        font_size: 30
	        text:str(app.consignas[1])
	        size_hint: .2, .15
            pos_hint:{"center_y": .35, "center_x": .32}

        Button:
			font_size: 30
			text : "+"
			pos_hint:{"center_y": .38, "center_x": .4}
			size_hint: .06, .06


		Button:
			font_size: 30
			text : "-"
			pos_hint:{"center_y": .32, "center_x": .4}
			size_hint: .06, .06

        Label:
            id:cons_z2_ver_red
	        font_size: 30
	        text:str(app.reducido_ver[1])
	        size_hint: .2, .15
            pos_hint:{"center_y": .35, "center_x": .52}


        Button:
			font_size: 30
			text : "+"
			pos_hint:{"center_y": .38, "center_x": .6}
			size_hint: .06, .06
			on_release:app.cambiar_cons_reducido(1, 2, 'ver')

		Button:
			font_size: 30
			text : "-"
			pos_hint:{"center_y": .32, "center_x": .6}
			size_hint: .06, .06
			on_release:app.cambiar_cons_reducido(-1, 2, 'ver')

        Label:
            id:cons_z2_ver_apa
	        font_size: 30
	        text:str(app.apagado_ver[1])
	        size_hint: .2, .15
            pos_hint:{"center_y": .35, "center_x": .75}

        Button:
			font_size: 30
			text : "+"
			pos_hint:{"center_y": .38, "center_x": .83}
			size_hint: .06, .06
			on_release:app.cambiar_cons_apagado(1, 2, 'ver')

		Button:
			font_size: 30
			text : "-"
			pos_hint:{"center_y": .32, "center_x": .83}
			size_hint: .06, .06
			on_release:app.cambiar_cons_apagado(-1, 2, 'ver')

	Fondo:
	    name:'cambiar_titulos'
	    BotonAbajo:

			source:"data/flecha_atras.png"
			pos_hint:{"center_x": .1, "y": .0}
			on_release:sm.current = 'ajustes'

		BotonAbajo:
			pos_hint:{"center_x": .9, "y": .0}
			source:"data/home.png"
			on_release:sm.current ='menu0'
	    BoxLayout:
	        size_hint:.6, .7
	        pos_hint:{"center_y": .65, "center_x": .45}
	        orientation:'vertical'
	        Label:
	            text:"ZONA 1"

	        TextInput:
	            id:new_title1

	        Label:
	            text:"ZONA 2"

	        TextInput:
	            id:new_title2

	        Label:
	            text:"ZONA 3"

	        TextInput:
	            id:new_title3

	    Button:
	        text:'Guardar'
	        size_hint:.1, .1
	        pos_hint:{"center_y": .82, "center_x": .83}
	        on_press: app.cambiar_titulos(1)
	    Button:
	        text:'Guardar'
	        size_hint:.1, .1
	        pos_hint:{"center_y": .59, "center_x": .83}
	        on_press: app.cambiar_titulos(2)
	    Button:
	        text:'Guardar'
	        size_hint:.1, .1
	        pos_hint:{"center_y": .36, "center_x": .83}
	        on_press: app.cambiar_titulos(3)

Main:

